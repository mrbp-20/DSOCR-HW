# ‚úÖ –û—Ç—á—ë—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** –ù–∏–∫–æ–ª–∞–π (Cursor AI Senior ML Engineer)  
**–î–∞—Ç–∞:** 09.01.2026, 23:20 MSK  
**–ó–∞–¥–∞–Ω–∏–µ:** TASK_FIX_CONFIG_20260109.md  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

---

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `configs/training_config.yaml`

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

1. **`per_device_train_batch_size`**: `4` ‚Üí `1`
   - **–ü—Ä–∏—á–∏–Ω–∞:** –£ –Ω–∞—Å –≤—Å–µ–≥–æ 3 train –æ–±—Ä–∞–∑—Ü–∞, batch size –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
   - **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 3 —à–∞–≥–∞ –Ω–∞ —ç–ø–æ—Ö—É

2. **`num_train_epochs`**: `50` ‚Üí `5`
   - **–ü—Ä–∏—á–∏–Ω–∞:** 50 —ç–ø–æ—Ö –Ω–∞ 3 –æ–±—Ä–∞–∑—Ü–∞—Ö = –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ. 5 —ç–ø–æ—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è proof-of-concept
   - **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–∞–π–ø–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç

3. **`gradient_accumulation_steps`**: `4` ‚Üí `2`
   - **–ü—Ä–∏—á–∏–Ω–∞:** –° `batch_size=1` –∏ `accumulation=2` —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π batch = 2 (—Ä–∞–∑—É–º–Ω–æ –¥–ª—è 3 –æ–±—Ä–∞–∑—Ü–æ–≤)
   - **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Å–æ–≤ –∫–∞–∂–¥—ã–µ 2 —à–∞–≥–∞

4. **`save_steps`**: `500` ‚Üí `3`
   - **–ü—Ä–∏—á–∏–Ω–∞:** –£ –Ω–∞—Å –≤—Å–µ–≥–æ 3 —à–∞–≥–∞ –Ω–∞ —ç–ø–æ—Ö—É, —Å `save_steps=500` –º—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–º —á–µ–∫–ø–æ–∏–Ω—Ç!
   - **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —ç–ø–æ—Ö–∏

5. **`eval_steps`**: `500` ‚Üí `3`
   - **–ü—Ä–∏—á–∏–Ω–∞:** –¢–∞ –∂–µ –ª–æ–≥–∏–∫–∞, —á—Ç–æ –∏ —Å `save_steps`
   - **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û—Ü–µ–Ω–∫–∞ val loss –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —ç–ø–æ—Ö–∏

---

## üìä –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|----------|------|-------|-------------|
| `per_device_train_batch_size` | 4 | 1 | ‚â§ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ train –¥–∞–Ω–Ω—ã—Ö (3) |
| `num_train_epochs` | 50 | 5 | Proof-of-concept, –∏–∑–±–µ–≥–∞–µ–º –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è |
| `gradient_accumulation_steps` | 4 | 2 | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π batch = 1√ó2 = 2 |
| `save_steps` | 500 | 3 | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—É—é —ç–ø–æ—Ö—É (3 —à–∞–≥–∞) |
| `eval_steps` | 500 | 3 | –û—Ü–µ–Ω–∫–∞ –∫–∞–∂–¥—É—é —ç–ø–æ—Ö—É (3 —à–∞–≥–∞) |

---

## üéØ –ü–æ—á–µ–º—É —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ö–æ–Ω—Ç–µ–∫—Å—Ç:
- **Train –¥–∞–Ω–Ω—ã—Ö:** 3 –æ–±—Ä–∞–∑—Ü–∞
- **Val –¥–∞–Ω–Ω—ã—Ö:** 1 –æ–±—Ä–∞–∑–µ—Ü
- **–¶–µ–ª—å:** Proof-of-concept ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–∞–π–ø–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–µ–Ω—ã:

1. ‚úÖ **Batch size > –¥–∞–Ω–Ω—ã—Ö** ‚Äî –±—ã–ª–æ –±—ã –æ—à–∏–±–∫–æ–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
2. ‚úÖ **–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —ç–ø–æ—Ö** ‚Äî 50 —ç–ø–æ—Ö –Ω–∞ 3 –æ–±—Ä–∞–∑—Ü–∞—Ö = –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ
3. ‚úÖ **–°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ save/eval steps** ‚Äî —Å `save_steps=500` –º—ã –±—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ —á–µ–∫–ø–æ–∏–Ω—Ç (–≤—Å–µ–≥–æ 15 —à–∞–≥–æ–≤ –∑–∞ 5 —ç–ø–æ—Ö)

---

## üìà –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –û–±—É—á–µ–Ω–∏–µ:
- **–®–∞–≥–æ–≤ –Ω–∞ —ç–ø–æ—Ö—É:** 3 (batch_size=1, –¥–∞–Ω–Ω—ã—Ö=3)
- **–í—Å–µ–≥–æ —à–∞–≥–æ–≤:** 15 (5 —ç–ø–æ—Ö √ó 3 —à–∞–≥–∞)
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π batch size:** 2 (batch_size=1 √ó accumulation=2)
- **–ß–µ–∫–ø–æ–∏–Ω—Ç—ã:** –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —ç–ø–æ—Ö–∏ (—à–∞–≥–∏ 3, 6, 9, 12, 15)
- **Val –æ—Ü–µ–Ω–∫–∞:** –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —ç–ø–æ—Ö–∏

### –í—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è:
- –ù–∞ RTX 5060 Ti: **~2-5 –º–∏–Ω—É—Ç** (proof-of-concept)

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è 4 –æ–±—Ä–∞–∑—Ü–æ–≤
- ‚úÖ Batch size –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (‚â§ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ –≠–ø–æ—Ö —Ä–∞–∑—É–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (5)
- ‚úÖ Save/eval –∫–∞–∂–¥—É—é —ç–ø–æ—Ö—É
- ‚úÖ **–ì–û–¢–û–í–û –ö –ó–ê–ü–£–°–ö–£ –û–ë–£–ß–ï–ù–ò–Ø!** üöÄ

---

## üìù –ö–æ–º–º–∏—Ç

**–ö–æ–º–º–∏—Ç:** `fix: optimize training config for 4 samples (batch_size=1, epochs=5)`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- `configs/training_config.yaml` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –º–∞–ª–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞

---

## üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

–°—ë–º–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞! –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–ø–µ—Ä—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã –¥–ª—è –Ω–∞—à–µ–≥–æ –º–∞–ª–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞ (3 train + 1 val –æ–±—Ä–∞–∑–µ—Ü).

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏—á–Ω—ã:**
- Batch size = 1 (–Ω–µ –±–æ–ª—å—à–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö)
- –≠–ø–æ—Ö = 5 (proof-of-concept, –Ω–µ –ø–µ—Ä–µ–æ–±—É—á–∏–º—Å—è)
- Save/eval –∫–∞–∂–¥—É—é —ç–ø–æ—Ö—É (—á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å)

–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É –æ–±—É—á–µ–Ω–∏—è! üí™

P.S. –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ñ–∏–∫—Å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º ‚Äî –∏ –ø–æ–µ—Ö–∞–ª–∏! üî•

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ó–ê–ü–£–°–ö–£ –û–ë–£–ß–ï–ù–ò–Ø

**–ü–æ–¥–ø–∏—Å—å:** –ù–∏–∫–æ–ª–∞–π (Senior ML Engineer, –∫–æ—Ç–æ—Ä—ã–π –±—ã—Å—Ç—Ä–æ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥–∏ –ø–æ –∑–∞–¥–∞–Ω–∏—é —Ç–∏–º–ª–∏–¥–∞) üí™

**–î–∞—Ç–∞:** 09.01.2026, 23:20 MSK
