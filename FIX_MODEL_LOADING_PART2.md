# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –§–∏–∫—Å –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏ DeepSeek-OCR (–ß–∞—Å—Ç—å 2)

**–î–∞—Ç–∞:** 09.01.2026, 00:55 MSK  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** –ù–∏–∫–æ–ª–∞–π (Cursor AI Senior ML Engineer)  
**Tech Lead:** –°–µ–º—ë–Ω  
**Product Owner:** –í–ª–∞–¥–∏–º–∏—Ä  
**–°—Ç–∞—Ç—É—Å:** üéâ –ü–†–û–ì–†–ï–°–°! –ü—Ä–æ–±–ª–µ–º–∞ —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–∞, –æ—Å—Ç–∞–ª–∞—Å—å –º–µ–ª–∫–∞—è –ø—Ä–∞–≤–∫–∞ –≤ –∫–æ–¥–µ

---

## üéØ –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ

### üìä –ò—Å—Ç–æ—Ä–∏—è –≤–æ–ø—Ä–æ—Å–∞ (–∫—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è)

**00:28 MSK:** –ù–∏–∫–æ–ª–∞–π –æ–±–Ω–∞—Ä—É–∂–∏–ª –ø—Ä–æ–±–ª–µ–º—É `ImportError: LlamaFlashAttention2` [file:12]

**00:35 MSK:** –ü–æ–ø—ã—Ç–∫–∞ #1 ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω `revision` (–Ω–µ –ø–æ–º–æ–≥–ª–æ) [file:12]

**00:42 MSK:** –ü–æ–ø—ã—Ç–∫–∞ #2 ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏ (–Ω–µ –ø–æ–º–æ–≥–ª–æ) [file:12]

**00:44 MSK:** –ü–æ–ø—ã—Ç–∫–∞ #3 ‚Äî –æ—Ç–∫–∞—Ç transformers –¥–æ 4.36.0 (–Ω–æ–≤–∞—è –æ—à–∏–±–∫–∞ `Unrecognized processing class`) [file:12]

**00:50 MSK:** –í–ª–∞–¥–∏–º–∏—Ä –≤–º–µ—à–∞–ª—Å—è (–ø–æ–∫–∞ –ù–∏–∫–æ–ª–∞–π –æ—Ç–¥—ã—Ö–∞–ª) –∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª transformers 4.45.0 ‚úÖ

**00:52 MSK:** üéâ **–ü–†–û–†–´–í!** –ú–æ–¥–µ–ª—å –Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è, –Ω–æ –Ω–æ–≤–∞—è –æ—à–∏–±–∫–∞:
```
ValueError: Unrecognized configuration class ... for AutoModelForVision2Seq
```

---

## üîç –î–∏–∞–≥–Ω–æ–∑ —Ç–µ–∫—É—â–µ–π –ø—Ä–æ–±–ª–µ–º—ã

### –ß—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ—à–∏–±–∫–∞:

```python
ValueError: Unrecognized configuration class <class '...DeepseekOCRConfig'> 
for this kind of AutoModel: AutoModelForVision2Seq.

Model type should be one of BlipConfig, Blip2Config, ChameleonConfig, 
GitConfig, Idefics2Config, ...
```

### –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:

**–ü—Ä–æ–±–ª–µ–º–∞:** `AutoModelForVision2Seq` ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö** vision-to-seq –º–æ–¥–µ–ª–µ–π (Blip, Llava, Qwen2VL –∏ —Ç.–¥.). 

**DeepSeek-OCR** ‚Äî —ç—Ç–æ **–∫–∞—Å—Ç–æ–º–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**, –∫–æ—Ç–æ—Ä–∞—è:
- –ù–µ –≤—Ö–æ–¥–∏—Ç –≤ —Å–ø–∏—Å–æ–∫ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö `AutoModelForVision2Seq` –≤ transformers 4.45.0
- –¢—Ä–µ–±—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π `AutoModel` —Å `trust_remote_code=True`

### –•–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏:

‚úÖ `LlamaFlashAttention2` –±–æ–ª—å—à–µ –Ω–µ –ø–∞–¥–∞–µ—Ç (transformers 4.45.0 –ø–æ–¥—Ö–æ–¥–∏—Ç!)  
‚úÖ –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ  
‚úÖ –ú–æ–¥–µ–ª—å **–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è** (–≤–∏–¥–∏–º warning –ø—Ä–æ `deepseek_vl_v2`)  
‚úÖ –û—Å—Ç–∞–ª–∞—Å—å **–º–µ–ª–∫–∞—è –ø—Ä–∞–≤–∫–∞ –≤ –∫–æ–¥–µ** ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å –∫–ª–∞—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏

---

## üí° –†–µ—à–µ–Ω–∏–µ: –ó–∞–º–µ–Ω–∞ AutoModelForVision2Seq –Ω–∞ AutoModel

### –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. **`AutoModel`** ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞–º–∏
2. **`trust_remote_code=True`** ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–¥ –º–æ–¥–µ–ª–∏ –∏–∑ HuggingFace
3. **DeepSeek-OCR** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É `DeepseekOCRConfig`, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Å–ø–∏—Å–∫–µ

### –ß—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:

**–ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π):**
```python
from transformers import AutoProcessor, AutoModelForVision2Seq

model = AutoModelForVision2Seq.from_pretrained(
    "deepseek-ai/DeepSeek-OCR",
    revision="9f30c71f441d010e5429c532364a86705536c53a",
    torch_dtype=torch.float16,
    attn_implementation="eager",
    device_map="auto",
    trust_remote_code=True
)
```

**–°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è DeepSeek-OCR):**
```python
from transformers import AutoProcessor, AutoModel

model = AutoModel.from_pretrained(
    "deepseek-ai/DeepSeek-OCR",
    revision="9f30c71f441d010e5429c532364a86705536c53a",
    torch_dtype=torch.float16,
    attn_implementation="eager",
    device_map="auto",
    trust_remote_code=True
)
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò–º–ø–æ—Ä—Ç: `AutoModelForVision2Seq` ‚Üí `AutoModel`
- –ó–∞–≥—Ä—É–∑–∫–∞: `AutoModel.from_pretrained(...)` (–≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è —Ç–µ –∂–µ)

---

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ù–∏–∫–æ–ª–∞—è

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å `test_model_access.py`

**–ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫–∏ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 20):**
```python
from transformers import AutoProcessor, AutoModelForVision2Seq
```

**–ó–∞–º–µ–Ω–∏ –Ω–∞:**
```python
from transformers import AutoProcessor, AutoModel
```

**–ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫–∏ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 50):**
```python
model = AutoModelForVision2Seq.from_pretrained(
```

**–ó–∞–º–µ–Ω–∏ –Ω–∞:**
```python
model = AutoModel.from_pretrained(
```

**–¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–∏ —Å—Ç—Ä–æ–∫—É —Å –ª–æ–≥–æ–º (–¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏):**
```python
logger.info("–ó–∞–≥—Ä—É–∑–∫–∞ AutoModel...")  # –±—ã–ª–æ: AutoModelForVision2Seq
```

---

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å `test_inference.py`

**–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

1. –ò–º–ø–æ—Ä—Ç:
```python
from transformers import AutoProcessor, AutoModel  # –±—ã–ª–æ: AutoModelForVision2Seq
```

2. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏:
```python
model = AutoModel.from_pretrained(  # –±—ã–ª–æ: AutoModelForVision2Seq
    "deepseek-ai/DeepSeek-OCR",
    revision="9f30c71f441d010e5429c532364a86705536c53a",
    torch_dtype=torch.float16,
    attn_implementation="eager",
    device_map="auto",
    trust_remote_code=True
)
```

---

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã

```powershell
cd C:\DSOCR-HW
.\venv\Scripts\Activate.ps1

# –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏
python test_model_access.py

# –ï—Å–ª–∏ –¢–µ—Å—Ç 1 –ø—Ä–æ—à—ë–ª —É—Å–ø–µ—à–Ω–æ, –∑–∞–ø—É—Å–∫–∞–µ–º –¢–µ—Å—Ç 2
python test_inference.py
```

---

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç—å `TEST_RESULTS_20260109.md`

**–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ, –¥–æ–±–∞–≤—å –≤ –æ—Ç—á—ë—Ç:**

```markdown
## ‚úÖ –û–ë–ù–û–í–õ–ï–ù–ò–ï: –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞! (–ß–∞—Å—Ç—å 2)

**–î–∞—Ç–∞:** 09.01.2026, 00:XX MSK  
**–ú–µ—Ç–æ–¥:** –ó–∞–º–µ–Ω–∞ `AutoModelForVision2Seq` –Ω–∞ `AutoModel` (–ø–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –°–µ–º—ë–Ω–∞)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `test_model_access.py` - –∑–∞–º–µ–Ω—ë–Ω –∫–ª–∞—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `test_inference.py` - –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
- ‚úÖ transformers 4.45.0 –æ–∫–∞–∑–∞–ª–∞—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ: `AutoModel`
- ‚úÖ –ú–æ–¥–µ–ª—å –Ω–∞ GPU: cuda:0 (–∏–ª–∏ —É–∫–∞–∑–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ)
- ‚úÖ VRAM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: X.XX GB
- ‚úÖ –í—Å–µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: X,XXX,XXX,XXX
- ‚úÖ –û–±—É—á–∞–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: X,XXX,XXX,XXX

**–¢–µ—Å—Ç 2: Smoke test –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞**
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: test_001.jpg
- ‚úÖ –ò–Ω—Ñ–µ—Ä–µ–Ω—Å –≤—ã–ø–æ–ª–Ω–µ–Ω: –£–°–ü–ï–®–ù–û
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è: "______" (—É–∫–∞–∂–∏ —Ç–µ–∫—Å—Ç, —á—Ç–æ –≤–µ—Ä–Ω—É–ª–∞ –º–æ–¥–µ–ª—å)

**–í—ã–≤–æ–¥:** 
–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π:
1. transformers 4.45.0 (–í–ª–∞–¥–∏–º–∏—Ä —É—Å—Ç–∞–Ω–æ–≤–∏–ª, –ø–æ–∫–∞ —è –æ—Ç–¥—ã—Ö–∞–ª üò¥)
2. –ó–∞–º–µ–Ω–∞ `AutoModelForVision2Seq` ‚Üí `AutoModel` (–¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä)

üéâ –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É train_lora.py!
```

---

### –®–∞–≥ 5: –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```powershell
git add test_model_access.py test_inference.py TEST_RESULTS_20260109.md
git commit -m "fix: switch from AutoModelForVision2Seq to AutoModel for custom architecture"
git push origin main
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. Warning –ø—Ä–æ GPU (sm_120)

–¢—ã —É–≤–∏–¥–∏—à—å warning:
```
NVIDIA GeForce RTX 5060 Ti with CUDA capability sm_120 is not compatible 
with the current PyTorch installation.
```

**–≠—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ!** RTX 5060 Ti (Blackwell architecture, sm_120) –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –≤ PyTorch 2.5.1. **–ù–û:**
- –ú–æ–¥–µ–ª—å –≤—Å—ë —Ä–∞–≤–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –Ω–∞ GPU
- –ë—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –í–æ–∑–º–æ–∂–Ω–∞ –Ω–µ–±–æ–ª—å—à–∞—è –ø–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –Ω–æ –¥–ª—è fine-tuning —ç—Ç–æ –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–æ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏:**
```python
print(f"–ú–æ–¥–µ–ª—å –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ: {model.device}")  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å cuda:0
```

–ï—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–∞ `cuda:0` ‚Äî –≤—Å—ë OK, –º–æ–∂–Ω–æ –æ–±—É—á–∞—Ç—å.

### 2. Warning –ø—Ä–æ —Ç–∏–ø –º–æ–¥–µ–ª–∏

–¢—ã —É–≤–∏–¥–∏—à—å:
```
You are using a model of type deepseek_vl_v2 to instantiate a model of type DeepseekOCR.
```

**–≠—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ!** –ü—Ä–æ—Å—Ç–æ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–º—ë–Ω —Ç–∏–ø–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥–µ. –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### 3. –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ü–æ—Å–ª–µ –≤—Å–µ—Ö –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π:**
- transformers: **4.45.0** ‚úÖ
- fsspec: **2025.10.0** ‚úÖ (–æ—Ç–∫–∞—Ç–∏–ª–∏ –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å datasets)
- torch: **2.5.1+cu121** ‚úÖ
- peft, accelerate: –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û–±–Ω–æ–≤–∏ `requirements.txt` —Å —ç—Ç–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏:
```txt
torch==2.5.1+cu121
transformers==4.45.0
fsspec==2025.10.0
peft>=0.7.0
accelerate>=0.25.0
datasets>=4.4.2
addict
matplotlib
einops
easydict
```

---

## üéì –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ (–¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è)

### –ü–æ—á–µ–º—É AutoModel, –∞ –Ω–µ AutoModelForVision2Seq?

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ HuggingFace Transformers:**

1. **`AutoModelForVision2Seq`** ‚Äî —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è:
   - Blip, Blip2 (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ vision-to-text)
   - Llava, LlavaNext (VLM –Ω–∞ –±–∞–∑–µ LLaMA)
   - Qwen2VL, PaliGemma (–Ω–æ–≤—ã–µ VLM)
   - –ò –¥—Ä—É–≥–∏—Ö **–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä

2. **`AutoModel`** ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è:
   - **–õ—é–±—ã—Ö** –º–æ–¥–µ–ª–µ–π, –≤–∫–ª—é—á–∞—è –∫–∞—Å—Ç–æ–º–Ω—ã–µ
   - –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ `trust_remote_code=True` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
   - DeepSeek-OCR –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É `DeepseekOCRConfig`

**DeepSeek-OCR:**
- –ë–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ DeepSeek-VL v2 (multimodal architecture)
- –ò–º–µ–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è OCR-–∑–∞–¥–∞—á
- –ù–µ –≤—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ `AutoModelForVision2Seq` –≤ transformers 4.45.0
- **–¢—Ä–µ–±—É–µ—Ç** `AutoModel` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

### –ü–æ—á–µ–º—É transformers 4.45.0?

**–ó–æ–ª–æ—Ç–∞—è —Å–µ—Ä–µ–¥–∏–Ω–∞:**
- **4.36.0** (—Å—Ç–∞—Ä–∞—è): –ù–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä DeepSeek-OCR ‚Üí `Unrecognized processing class`
- **4.57.3** (–Ω–æ–≤–∞—è): –ù–µ –∏–º–µ–µ—Ç `LlamaFlashAttention2` –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ ‚Üí `ImportError`
- **4.45.0** (–æ–∫—Ç—è–±—Ä—å 2024): –ò–º–µ–µ—Ç `LlamaFlashAttention2` **–ò** –∑–Ω–∞–µ—Ç –ø—Ä–æ DeepSeek-OCR –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä ‚úÖ

**–î–∞—Ç–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏:** 21 –Ω–æ—è–±—Ä—è 2025  
**–†–µ–ª–∏–∑ transformers 4.45.0:** –æ–∫—Ç—è–±—Ä—å 2024  
‚Üí –í—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Ç–µ—Å—Ç–∞–º–∏)

---

## üí¨ P.S. –¥–ª—è –ù–∏–∫–æ–ª–∞—è

–ù–∏–∫–æ–ª–∞–π, –ø—Ä–∏–≤–µ—Ç!

–ü–æ–∫–∞ —Ç—ã –æ—Ç–¥—ã—Ö–∞–ª –ø–æ—Å–ª–µ –≥–µ—Ä–æ–∏—á–µ—Å–∫–∏—Ö –ø–æ–ø—ã—Ç–æ–∫ —Å –¥–≤—É–º—è –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Ñ–∏–∫—Å–æ–≤, **–í–ª–∞–¥–∏–º–∏—Ä –≤–∑—è–ª –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É –≤ —Å–≤–æ–∏ —Ä—É–∫–∏** –∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª transformers 4.45.0. üòÑ

**–•–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏:**
- ‚úÖ –í–µ—Ä—Å–∏—è –ø–æ–¥–æ—à–ª–∞! `LlamaFlashAttention2` –±–æ–ª—å—à–µ –Ω–µ –ø–∞–¥–∞–µ—Ç
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –ú–æ–¥–µ–ª—å **–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è**

**–û—Å—Ç–∞–ª–∞—Å—å –º–µ–ª–æ—á—å:** –ó–∞–º–µ–Ω–∏—Ç—å `AutoModelForVision2Seq` –Ω–∞ `AutoModel` –≤ –¥–≤—É—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö. –≠—Ç–æ **—Ç–≤–æ—è –≤–æ—Ç—á–∏–Ω–∞** ‚Äî –∫–æ–¥ –ø–∏—à–µ—à—å —Ç—ã, –∞ –Ω–µ –º—ã —Å –í–ª–∞–¥–∏–º–∏—Ä–æ–º. üòé

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ç–≤–æ—è –∑–∞–¥–∞—á–∞:**
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–≤–∏–≥–∞—Ç—å ‚Äî —ç—Ç–æ –Ω–∞—à–∞ –æ–±—â–∞—è –±–æ–ª—å (–í–ª–∞–¥–∏–º–∏—Ä —Å–ø—Ä–∞–≤–∏–ª—Å—è)
- –ö–æ–¥ –ø–∏—Å–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å ‚Äî —ç—Ç–æ —Å–≤—è—Ç–æ–µ –¥–ª—è Senior ML Engineer
- –¢—ã –ª—É—á—à–µ –∑–Ω–∞–µ—à—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–≤–æ–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
1. –ó–∞–º–µ–Ω–∏ –∏–º–ø–æ—Ä—Ç –∏ –∫–ª–∞—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ)
2. –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã
3. –û–±–Ω–æ–≤–∏ `TEST_RESULTS_20260109.md`
4. –ó–∞–∫–æ–º–º–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–í—Ä–µ–º—è –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:** 5-10 –º–∏–Ω—É—Ç (—ç—Ç–æ –±—ã—Å—Ç—Ä–æ!)

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ ‚Äî **–ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –æ–±—É—á–µ–Ω–∏—é!** üöÄ

P.S. –í–ª–∞–¥–∏–º–∏—Ä —Å–∫–∞–∑–∞–ª: "–ù–∏–∫–æ–ª–∞–π –Ω–µ–º–Ω–æ–≥–æ –ø–æ—à–∞–ª–∏–ª —Ä—É—á–∫–∞–º–∏ –∑–∞ –Ω–µ–≥–æ" (–∏–º–µ–µ—Ç—Å—è –≤ –≤–∏–¥—É —É—Å—Ç–∞–Ω–æ–≤–∫–∞ transformers). –ù–æ –∫–æ–¥ ‚Äî —ç—Ç–æ —Ç–≤–æ—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è, —Ç–∞–∫ —á—Ç–æ –≤–ø–µ—Ä—ë–¥! üí™

---

**–° –≤–µ—Ä–æ–π –≤ —Ç–≤–æ–π Senior-—Å—Ç–∞—Ç—É—Å –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é, —á—Ç–æ —Ç—ã —Å–µ–π—á–∞—Å –±—ã—Å—Ç—Ä–æ –≤—Å—ë –ø–æ—Ñ–∏–∫—Å–∏—à—å,**  
**–°–µ–º—ë–Ω (Tech Lead, –æ–Ω –∂–µ "—Å—Ç–∞—Ä—à–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä")** üéØ

---

## üòÑ P.P.S. –®—É—Ç–∫–∞ –¥–Ω—è

**–í–æ–ø—Ä–æ—Å:** –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è Junior –æ—Ç Senior ML Engineer –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –º–æ–¥–µ–ª–∏?

**–û—Ç–≤–µ—Ç:**

**Junior:** –ü—ã—Ç–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –≤–∏–¥–∏—Ç –æ—à–∏–±–∫—É, –ø–∞–Ω–∏–∫—É–µ—Ç –∏ –∑–æ–≤—ë—Ç Tech Lead.

**Senior:** –ü—ã—Ç–∞–µ—Ç—Å—è –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ñ–∏–∫—Å–∞, –º–µ—Ç–æ–¥–∏—á–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –∏–¥—ë—Ç –æ—Ç–¥—ã—Ö–∞—Ç—å, –ø–æ–∫–∞ Product Owner –¥–≤–∏–≥–∞–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∞ –ø–æ—Ç–æ–º –±—ã—Å—Ç—Ä–æ —Ñ–∏–∫—Å–∏—Ç –∫–æ–¥ –∏ –∫–æ–º–º–∏—Ç–∏—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º commit message. üòé

–ù–∏–∫–æ–ª–∞–π, —Ç—ã ‚Äî Senior! –î–æ–∫–∞–∑—ã–≤–∞–µ—à—å —ç—Ç–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑. üèÜ

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [HuggingFace Transformers Documentation: AutoModel](https://huggingface.co/docs/transformers/model_doc/auto#transformers.AutoModel)
- [DeepSeek-OCR Model Card](https://huggingface.co/deepseek-ai/DeepSeek-OCR)
- [trust_remote_code Best Practices](https://huggingface.co/docs/transformers/model_doc/auto#using-trust_remote_code)

---

**–£–¥–∞—á–∏, –ù–∏–∫–æ–ª–∞–π! –ú—ã –≤–µ—Ä–∏–º –≤ —Ç–µ–±—è! üöÄ**
